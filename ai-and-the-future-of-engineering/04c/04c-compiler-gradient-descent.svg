<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600" width="900" height="600">
  <defs>
    <linearGradient id="aiGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#667eea"/>
      <stop offset="100%" stop-color="#764ba2"/>
    </linearGradient>

    <linearGradient id="curveGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#ef4444"/>
      <stop offset="40%" stop-color="#f97316"/>
      <stop offset="70%" stop-color="#eab308"/>
      <stop offset="100%" stop-color="#22c55e"/>
    </linearGradient>

    <linearGradient id="areaGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#ef4444" stop-opacity="0.08"/>
      <stop offset="100%" stop-color="#22c55e" stop-opacity="0.04"/>
    </linearGradient>

    <filter id="shadow" x="-10%" y="-10%" width="130%" height="130%">
      <feDropShadow dx="2" dy="2" stdDeviation="4" flood-opacity="0.12"/>
    </filter>

    <filter id="glow" x="-30%" y="-30%" width="160%" height="160%">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <marker id="arrowCycle" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#667eea"/>
    </marker>
  </defs>

  <style>
    .pulse-dot { animation: pulseDot 2s ease-in-out infinite; }
    @keyframes pulseDot {
      0%, 100% { r: 10; opacity: 0.8; }
      50% { r: 13; opacity: 1; }
    }
    .fade-label { animation: fadeIn 1.5s ease-in-out infinite alternate; }
    @keyframes fadeIn {
      0% { opacity: 0.7; }
      100% { opacity: 1; }
    }
  </style>

  <rect width="900" height="600" fill="#f0f4f8"/>

  <!-- Title -->
  <text x="450" y="38" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1e293b">Compiling by Descent</text>
  <text x="450" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" fill="#64748b">Errors are the signal. Each iteration brings the agent closer to working code.</text>

  <!-- ===== MAIN CHART ===== -->
  <g transform="translate(70, 80)">
    <!-- Chart background -->
    <rect x="0" y="0" width="760" height="370" rx="12" fill="white" filter="url(#shadow)"/>

    <!-- Y-axis label -->
    <text x="22" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#64748b" transform="rotate(-90, 22, 185)">Compiler Errors</text>

    <!-- Y-axis -->
    <line x1="70" y1="28" x2="70" y2="330" stroke="#cbd5e1" stroke-width="1.5"/>

    <!-- Y-axis ticks -->
    <text x="62" y="52" text-anchor="end" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8">50</text>
    <line x1="66" y1="48" x2="70" y2="48" stroke="#cbd5e1"/>
    <text x="62" y="122" text-anchor="end" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8">30</text>
    <line x1="66" y1="118" x2="70" y2="118" stroke="#cbd5e1"/>
    <text x="62" y="192" text-anchor="end" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8">15</text>
    <line x1="66" y1="188" x2="70" y2="188" stroke="#cbd5e1"/>
    <text x="62" y="262" text-anchor="end" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8">5</text>
    <line x1="66" y1="258" x2="70" y2="258" stroke="#cbd5e1"/>
    <text x="62" y="332" text-anchor="end" font-family="Arial, sans-serif" font-size="10" fill="#94a3b8">0</text>

    <!-- X-axis -->
    <line x1="70" y1="326" x2="720" y2="326" stroke="#cbd5e1" stroke-width="1.5"/>
    <text x="395" y="360" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#64748b">compile &#8594; read errors &#8594; fix code &#8594; compile again</text>

    <!-- Grid lines -->
    <line x1="70" y1="48" x2="720" y2="48" stroke="#e2e8f0" stroke-width="0.5" stroke-dasharray="4,4"/>
    <line x1="70" y1="118" x2="720" y2="118" stroke="#e2e8f0" stroke-width="0.5" stroke-dasharray="4,4"/>
    <line x1="70" y1="188" x2="720" y2="188" stroke="#e2e8f0" stroke-width="0.5" stroke-dasharray="4,4"/>
    <line x1="70" y1="258" x2="720" y2="258" stroke="#e2e8f0" stroke-width="0.5" stroke-dasharray="4,4"/>

    <!-- Shaded area under curve -->
    <path d="M 120 55 C 170 58, 230 125, 280 148 C 330 171, 390 222, 420 248 C 450 274, 510 300, 550 312 C 590 324, 640 326, 680 326 L 680 326 L 120 326 Z"
          fill="url(#areaGrad)"/>

    <!-- The descent curve -->
    <path d="M 120 55 C 170 58, 230 125, 280 148 C 330 171, 390 222, 420 248 C 450 274, 510 300, 550 312 C 590 324, 640 326, 680 326"
          stroke="url(#curveGrad)" stroke-width="4" fill="none" stroke-linecap="round"/>

    <!-- ===== POINT 1: 47 errors ===== -->
    <circle cx="120" cy="55" r="7" fill="#ef4444" filter="url(#glow)"/>
    <circle cx="120" cy="55" r="4" fill="white"/>

    <!-- Tooltip 1 -->
    <g transform="translate(120, 55)">
      <rect x="12" y="-30" width="116" height="44" rx="6" fill="#1e1e2e" filter="url(#shadow)"/>
      <polygon points="10,-16 12,-10 12,-22" fill="#1e1e2e"/>
      <text x="70" y="-14" text-anchor="middle" font-family="monospace, Courier" font-size="11" fill="#ef4444" font-weight="bold">47 errors</text>
      <text x="70" y="2" text-anchor="middle" font-family="monospace, Courier" font-size="9" fill="#6e6e82">type mismatch, missing</text>
    </g>
    <text x="120" y="346" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#ef4444" font-weight="bold">Attempt 1</text>

    <!-- Feedback arrow 1 to 2 -->
    <path d="M 145 65 Q 200 108, 255 140" stroke="#667eea" stroke-width="1.5" fill="none" stroke-dasharray="5,4" marker-end="url(#arrowCycle)" opacity="0.5"/>
    <text x="186" y="92" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#667eea" font-style="italic" transform="rotate(-26, 186, 92)">feed errors back</text>

    <!-- ===== POINT 2: 12 errors ===== -->
    <circle cx="280" cy="148" r="7" fill="#f97316" filter="url(#glow)"/>
    <circle cx="280" cy="148" r="4" fill="white"/>

    <!-- Tooltip 2 -->
    <g transform="translate(280, 148)">
      <rect x="12" y="-30" width="116" height="44" rx="6" fill="#1e1e2e" filter="url(#shadow)"/>
      <polygon points="10,-16 12,-10 12,-22" fill="#1e1e2e"/>
      <text x="70" y="-14" text-anchor="middle" font-family="monospace, Courier" font-size="11" fill="#f97316" font-weight="bold">12 errors</text>
      <text x="70" y="2" text-anchor="middle" font-family="monospace, Courier" font-size="9" fill="#6e6e82">missing return types</text>
    </g>
    <text x="280" y="346" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#f97316" font-weight="bold">Attempt 2</text>

    <!-- Feedback arrow 2 to 3 -->
    <path d="M 305 157 Q 355 200, 395 240" stroke="#667eea" stroke-width="1.5" fill="none" stroke-dasharray="5,4" marker-end="url(#arrowCycle)" opacity="0.5"/>
    <text x="340" y="192" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#667eea" font-style="italic" transform="rotate(-36, 340, 192)">feed errors back</text>

    <!-- ===== POINT 3: 3 errors ===== -->
    <circle cx="420" cy="248" r="7" fill="#eab308" filter="url(#glow)"/>
    <circle cx="420" cy="248" r="4" fill="white"/>

    <!-- Tooltip 3 -->
    <g transform="translate(420, 248)">
      <rect x="12" y="-30" width="116" height="44" rx="6" fill="#1e1e2e" filter="url(#shadow)"/>
      <polygon points="10,-16 12,-10 12,-22" fill="#1e1e2e"/>
      <text x="70" y="-14" text-anchor="middle" font-family="monospace, Courier" font-size="11" fill="#eab308" font-weight="bold">3 errors</text>
      <text x="70" y="2" text-anchor="middle" font-family="monospace, Courier" font-size="9" fill="#6e6e82">edge case in parser</text>
    </g>
    <text x="420" y="346" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#eab308" font-weight="bold">Attempt 3</text>

    <!-- Feedback arrow 3 to 4 -->
    <path d="M 445 257 Q 485 280, 525 305" stroke="#667eea" stroke-width="1.5" fill="none" stroke-dasharray="5,4" marker-end="url(#arrowCycle)" opacity="0.5"/>
    <text x="480" y="278" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#667eea" font-style="italic" transform="rotate(-28, 480, 278)">feed errors back</text>

    <!-- ===== POINT 4: 1 error ===== -->
    <circle cx="550" cy="312" r="7" fill="#84cc16" filter="url(#glow)"/>
    <circle cx="550" cy="312" r="4" fill="white"/>

    <!-- Tooltip 4 -->
    <g transform="translate(550, 312)">
      <rect x="-128" y="-38" width="116" height="34" rx="6" fill="#1e1e2e" filter="url(#shadow)"/>
      <polygon points="-10,-28 -12,-22 -12,-34" fill="#1e1e2e"/>
      <text x="-70" y="-18" text-anchor="middle" font-family="monospace, Courier" font-size="11" fill="#84cc16" font-weight="bold">1 error</text>
    </g>
    <text x="550" y="346" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#84cc16" font-weight="bold">Attempt 4</text>

    <!-- Feedback arrow 4 to 5 -->
    <path d="M 572 318 Q 610 322, 655 325" stroke="#667eea" stroke-width="1.5" fill="none" stroke-dasharray="5,4" marker-end="url(#arrowCycle)" opacity="0.4"/>

    <!-- ===== POINT 5: 0 errors - COMPILES ===== -->
    <circle cx="680" cy="326" r="10" fill="#22c55e" class="pulse-dot" filter="url(#glow)"/>
    <circle cx="680" cy="326" r="6" fill="white"/>
    <path d="M 676 326 L 679 329 L 685 323" fill="none" stroke="#22c55e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>

    <!-- Success tooltip -->
    <g transform="translate(680, 326)">
      <rect x="-58" y="-52" width="116" height="38" rx="6" fill="#1e1e2e" filter="url(#shadow)"/>
      <polygon points="-4,-14 0,-8 4,-14" fill="#1e1e2e"/>
      <text x="0" y="-34" text-anchor="middle" font-family="monospace, Courier" font-size="12" fill="#22c55e" font-weight="bold">0 errors</text>
      <text x="0" y="-20" text-anchor="middle" font-family="monospace, Courier" font-size="10" fill="#22c55e">It compiles!</text>
    </g>

    <!-- Cycle diagram in top-right -->
    <g transform="translate(520, 20)">
      <rect x="0" y="0" width="190" height="74" rx="8" fill="url(#aiGrad)" opacity="0.08"/>
      <rect x="0" y="0" width="190" height="74" rx="8" fill="none" stroke="#667eea" stroke-width="1.5" stroke-dasharray="4,2"/>

      <!-- Circular arrows -->
      <g transform="translate(32, 37)">
        <circle cx="0" cy="0" r="16" fill="none" stroke="#667eea" stroke-width="1.8" stroke-dasharray="18,8" stroke-linecap="round"/>
        <polygon points="14,-8 18,-2 10,-2" fill="#667eea"/>
      </g>

      <text x="114" y="24" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#4f46e5">The Loop</text>
      <text x="114" y="40" text-anchor="middle" font-family="monospace, Courier" font-size="9" fill="#6366f1">compile</text>
      <text x="114" y="53" text-anchor="middle" font-family="monospace, Courier" font-size="9" fill="#ef4444">&#8594; errors</text>
      <text x="114" y="66" text-anchor="middle" font-family="monospace, Courier" font-size="9" fill="#22c55e">&#8594; fix &#8594; repeat</text>
    </g>
  </g>

  <!-- ===== KEY INSIGHT ===== -->
  <g transform="translate(70, 468)">
    <rect x="0" y="0" width="760" height="118" rx="10" fill="#eef2ff" stroke="#818cf8" stroke-width="2"/>

    <!-- Gradient symbol -->
    <g transform="translate(24, 14)">
      <circle cx="28" cy="28" r="26" fill="url(#aiGrad)" opacity="0.15"/>
      <text x="28" y="36" text-anchor="middle" font-family="serif" font-size="32" fill="#4f46e5">&#8711;</text>
    </g>

    <!-- Main insight text -->
    <text x="420" y="26" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#4338ca">This is Gradient Descent for Code</text>

    <text x="420" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#6366f1">Compiler errors are the loss function &#8212; they tell the agent exactly what's wrong and where.</text>
    <text x="420" y="68" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#6366f1">Each error message is a gradient pointing toward the fix.</text>
    <text x="420" y="86" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#6366f1">The agent doesn't need to get it right the first time &#8212; it just needs to keep descending.</text>

    <!-- Comparison row -->
    <g transform="translate(90, 96)">
      <text x="0" y="0" font-family="Arial, sans-serif" font-size="9" fill="#818cf8">ML: loss &#8594; gradient &#8594; update weights &#8594; repeat</text>
      <text x="280" y="0" font-family="Arial, sans-serif" font-size="9" fill="#818cf8">|</text>
      <text x="300" y="0" font-family="Arial, sans-serif" font-size="9" fill="#818cf8">Compiler: errors &#8594; error messages &#8594; fix code &#8594; repeat</text>
    </g>
  </g>
</svg>
